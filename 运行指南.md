# Live2D + 小智AI 完整系统运行指南

## 🚀 快速启动步骤

### 第一步：启动前端服务
```bash
cd /Users/good/Desktop/Zoe
python3 -m http.server 3000 --bind 127.0.0.1
```
保持这个终端窗口运行，不要关闭。

### 第二步：打开浏览器查看Live2D
在浏览器中访问：
```
http://localhost:3000
```
你应该能看到Live2D模型在页面中央。

### 第三步：启动完整系统
打开新的终端窗口，运行：
```bash
cd /Users/good/Desktop/Zoe
python3 run_live2d_xiaozhi.py
```

## 🎭 使用方法

### 语音对话
系统启动后，你可以：
1. 直接说话 - 系统会自动识别语音
2. 小智AI会回复 - Live2D模型会同步动作和表情
3. 支持连续对话

### 聊天界面
- 右下角有文本输入框
- 可以输入文字消息
- 聊天记录会显示在透明气泡中

### 控制面板
- 右侧有动作和表情控制按钮
- 可以手动触发Live2D动作
- 支持音量控制

## 📝 系统状态检查

### 检查前端是否正常
```bash
curl http://localhost:3000
```
应该返回HTML页面内容。

### 检查系统连接
运行诊断工具：
```bash
python3 connection_diagnosis.py
```

### 运行完整测试
```bash
python3 complete_system_test.py
```

## 🔧 故障排除

### 如果Live2D模型不显示
1. 确认浏览器访问 http://localhost:3000 能看到页面
2. 检查浏览器控制台是否有错误
3. 刷新浏览器页面

### 如果小智AI无法连接
1. 检查网络连接
2. 确认设备已激活（运行过激活流程）
3. 查看终端日志是否有错误信息

### 如果语音无法工作
1. 检查麦克风权限
2. 确认音频设备正常
3. 查看系统音量设置

## 🎯 高级使用

### 手动激活新设备（如果需要）
```bash
python3 correct_activation_flow.py
```
按提示到 https://xiaozhi.me 完成激活。

### 仅测试Live2D控制
```bash
python3 live2d_controller.py
```

### 查看详细日志
运行时会显示详细日志信息，包括：
- WebSocket连接状态
- 语音识别结果
- 情感分析结果
- Live2D动作触发

## 📊 系统特性

✅ **已实现功能：**
- Live2D模型显示和控制
- 小智AI语音对话
- 实时情感识别和映射
- WebSocket实时通信
- 聊天界面同步
- 音频播放和TTS

⚠️ **已知问题：**
- Live2D动作的异步回调需要优化
- 部分情感映射可能有延迟

## 💡 使用建议

1. **首次运行**：确保网络连接良好，激活过程需要网络
2. **日常使用**：前端服务启动后可以重复使用，无需重新激活
3. **性能优化**：如果感觉卡顿，可以关闭其他占用资源的应用
4. **语音质量**：在安静环境中使用效果更佳

## 🎉 享受使用！

系统启动成功后，你就拥有了一个完整的Live2D + 小智AI语音助手！
可以和小智进行自然对话，看着Live2D模型的表情和动作实时响应你的情绪。